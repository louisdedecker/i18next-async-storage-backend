!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("@react-native-community/async-storage")):"function"==typeof define&&define.amd?define(["@react-native-community/async-storage"],n):e.i18nextAsyncStorageBackend=n(e.AsyncStorage)}(this,function(e){"use strict";function n(e){return r.call(s.call(arguments,1),function(n){if(n)for(var t in n)void 0===e[t]&&(e[t]=n[t])}),e}function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function i(){return{prefix:"i18next_res_",expirationTime:6048e5,versions:{}}}e="default"in e?e.default:e;var o=[],r=o.forEach,s=o.slice,a=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),u={setItem:function(n,t){if(e)return e.setItem(n,t)},getItem:function(n,t){if(e)return e.getItem(n,t)}},c=function(){function o(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t(this,o),this.init(e,n),this.type="backend"}return a(o,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.services=e,this.options=n(t,this.options||{},i())}},{key:"read",value:function(n,t,i){var o=this,r=(new Date).getTime();if(!e)return i(null,null);u.getItem(""+this.options.prefix+n+"-"+t).then(function(e){if(e&&(e=JSON.parse(e),e.i18nStamp&&e.i18nStamp+o.options.expirationTime>r&&o.options.versions[n]===e.i18nVersion))return delete e.i18nVersion,delete e.i18nStamp,i(null,e);i(null,null)}).catch(function(e){console.warn(e),i(null,null)})}},{key:"save",value:function(n,t,i){e&&(i.i18nStamp=(new Date).getTime(),this.options.versions[n]&&(i.i18nVersion=this.options.versions[n]),u.setItem(""+this.options.prefix+n+"-"+t,JSON.stringify(i)))}}]),o}();return c.type="backend",c});
